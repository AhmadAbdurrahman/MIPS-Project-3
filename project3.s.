# program: 1000 char string
# N = 31
# M = 21


.data
sum: .word  0 
user_string: .space 1001 
comma: .asciiz ","
error_message: .asciiz "-" 
buffer: .space 1001

.text
main:
li $v0, 8 
la $a0, buffer 
li $a1, 1001
syscall 

addi $sp, $sp, -4 
sw $a0, 0($sp) 
jal sub_a

li $v0, 10
syscall 

sub_a:
move $s6, $ra 
lw  $t6, 0($sp) 
addi $sp, $sp, -4 

addi $a3, $zero, 0
addi $t2, $zero, 0 
la $a0, user_string

sub_loop:
add $t1, $t6, $a3 
add $t4, $a0, $t2 
lb $t1, ($t1)
beq $t1, 59, go2SubB 
bgt $a3, 1000, go2SubB 
sb $t1, ($t4) 

addi $a3, $a3, 1
addi $t2, $t2, 1 
j sub_loop

go2SubB:
move $t7, $ra
addi $sp, $sp, -4 
sw $a0, 0($sp) 
jal sub_b

lw  $t7, 0($sp)
addi $sp, $sp, -4 #resets stack
beq $t7, -1, invalid

li $v0, 1
move $a0,$t7